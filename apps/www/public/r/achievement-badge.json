{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "achievement-badge",
  "type": "registry:ui",
  "dependencies": [
    "class-variance-authority",
    "lucide-react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/ui/achievement-badge.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { Lock, Trophy } from \"lucide-react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Types (inlined)\ninterface Achievement {\n  id: string\n  name: string\n  trigger: \"metric\" | \"api\" | \"streak\"\n  description?: string | null\n  badgeUrl?: string | null\n  key?: string\n  metricId?: string\n  metricName?: string\n  metricValue?: number\n  streakLength?: number\n  userAttributes?: Array<{ key: string; value: string }>\n  eventAttribute?: { key: string; value: string }\n}\n\ninterface UserAchievement extends Achievement {\n  achievedAt: string | null // null = locked\n}\n\n// Variants\nconst achievementBadgeVariants = cva(\n  \"relative flex flex-col items-center gap-2 rounded-lg border p-4 transition-all\",\n  {\n    variants: {\n      variant: {\n        card: \"bg-card shadow-sm hover:shadow-md\",\n        badge: \"bg-transparent border-none p-2\",\n        minimal: \"border-none bg-transparent p-1\",\n      },\n      size: {\n        sm: \"w-20\",\n        default: \"w-28\",\n        lg: \"w-36\",\n        xl: \"w-44\",\n      },\n    },\n    defaultVariants: {\n      variant: \"card\",\n      size: \"default\",\n    },\n  }\n)\n\n// Props\ninterface AchievementBadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof achievementBadgeVariants> {\n  /** Achievement data (use UserAchievement for locked/unlocked state) */\n  achievement: UserAchievement\n  /** Show description below name */\n  showDescription?: boolean\n  /** Show progress for metric achievements */\n  showProgress?: boolean\n  /** Current value for metric progress */\n  currentValue?: number\n  /** Style for locked achievements */\n  lockedStyle?: \"grayscale\" | \"silhouette\" | \"hidden\"\n  /** Show lock icon on locked achievements */\n  showLockIcon?: boolean\n  /** Custom icon when no badgeUrl */\n  icon?: React.ReactNode\n}\n\nconst AchievementBadge = React.forwardRef<HTMLDivElement, AchievementBadgeProps>(\n  (\n    {\n      className,\n      variant,\n      size,\n      achievement,\n      showDescription = false,\n      showProgress = false,\n      currentValue = 0,\n      lockedStyle = \"grayscale\",\n      showLockIcon = true,\n      icon,\n      onClick,\n      ...props\n    },\n    ref\n  ) => {\n    const isUnlocked = achievement.achievedAt !== null\n    const isMetric = achievement.trigger === \"metric\"\n    const target = achievement.metricValue ?? 0\n    const progress = target > 0 ? Math.min((currentValue / target) * 100, 100) : 0\n\n    // Don't render if locked and lockedStyle is \"hidden\"\n    if (!isUnlocked && lockedStyle === \"hidden\") {\n      return null\n    }\n\n    const imageSize = {\n      sm: \"h-12 w-12\",\n      default: \"h-16 w-16\",\n      lg: \"h-20 w-20\",\n      xl: \"h-24 w-24\",\n    }[size ?? \"default\"]\n\n    const iconSize = {\n      sm: \"h-8 w-8\",\n      default: \"h-10 w-10\",\n      lg: \"h-12 w-12\",\n      xl: \"h-14 w-14\",\n    }[size ?? \"default\"]\n\n    const textSize = {\n      sm: \"text-xs\",\n      default: \"text-sm\",\n      lg: \"text-base\",\n      xl: \"text-lg\",\n    }[size ?? \"default\"]\n\n    return (\n      <div\n        ref={ref}\n        role={onClick ? \"button\" : undefined}\n        tabIndex={onClick ? 0 : undefined}\n        onClick={onClick}\n        onKeyDown={\n          onClick\n            ? (e) => {\n                if (e.key === \"Enter\" || e.key === \" \") {\n                  e.preventDefault()\n                  onClick(e as unknown as React.MouseEvent<HTMLDivElement>)\n                }\n              }\n            : undefined\n        }\n        className={cn(\n          achievementBadgeVariants({ variant, size }),\n          onClick && \"cursor-pointer\",\n          !isUnlocked && lockedStyle === \"grayscale\" && \"opacity-50\",\n          className\n        )}\n        {...props}\n      >\n        {/* Badge image or icon */}\n        <div className=\"relative\">\n          {achievement.badgeUrl ? (\n            <img\n              src={achievement.badgeUrl}\n              alt={achievement.name}\n              className={cn(\n                imageSize,\n                \"rounded-full object-cover\",\n                !isUnlocked && lockedStyle === \"grayscale\" && \"grayscale\",\n                !isUnlocked && lockedStyle === \"silhouette\" && \"brightness-0 opacity-30\"\n              )}\n            />\n          ) : (\n            <div\n              className={cn(\n                imageSize,\n                \"flex items-center justify-center rounded-full\",\n                isUnlocked\n                  ? \"bg-purple-500 text-white\"\n                  : \"bg-muted text-muted-foreground\"\n              )}\n            >\n              {icon ?? <Trophy className={iconSize} />}\n            </div>\n          )}\n\n          {/* Lock icon overlay */}\n          {!isUnlocked && showLockIcon && (\n            <div className=\"absolute -bottom-1 -right-1 rounded-full bg-background p-1 shadow-sm\">\n              <Lock className=\"h-3 w-3 text-muted-foreground\" />\n            </div>\n          )}\n        </div>\n\n        {/* Name */}\n        <span\n          className={cn(\n            textSize,\n            \"text-center font-medium leading-tight\",\n            !isUnlocked && \"text-muted-foreground\"\n          )}\n        >\n          {achievement.name}\n        </span>\n\n        {/* Description */}\n        {showDescription && achievement.description && (\n          <span className=\"text-xs text-center text-muted-foreground line-clamp-2\">\n            {achievement.description}\n          </span>\n        )}\n\n        {/* Progress bar for metric achievements */}\n        {showProgress && isMetric && !isUnlocked && (\n          <div className=\"w-full space-y-1\">\n            <div className=\"h-1.5 w-full overflow-hidden rounded-full bg-muted\">\n              <div\n                className=\"h-full bg-purple-500 transition-all\"\n                style={{ width: `${progress}%` }}\n              />\n            </div>\n            <span className=\"text-xs text-muted-foreground text-center block\">\n              {currentValue}/{target}\n            </span>\n          </div>\n        )}\n      </div>\n    )\n  }\n)\nAchievementBadge.displayName = \"AchievementBadge\"\n\nexport { AchievementBadge, achievementBadgeVariants }\nexport type { AchievementBadgeProps, Achievement, UserAchievement }\n",
      "type": "registry:ui"
    }
  ]
}