{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "achievement-grid",
  "type": "registry:ui",
  "dependencies": [
    "class-variance-authority",
    "lucide-react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/ui/achievement-grid.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Trophy } from \"lucide-react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\n// Types (inlined)\ninterface Achievement {\n  id: string;\n  name: string;\n  trigger: \"metric\" | \"api\" | \"streak\";\n  description?: string | null;\n  badgeUrl?: string | null;\n  key?: string;\n  metricId?: string;\n  metricName?: string;\n  metricValue?: number;\n  streakLength?: number;\n}\n\ninterface UserAchievement extends Achievement {\n  achievedAt: string | null; // null = locked\n}\n\n// Variants\nconst achievementGridVariants = cva(\"grid\", {\n  variants: {\n    columns: {\n      2: \"grid-cols-2\",\n      3: \"grid-cols-3\",\n      4: \"grid-cols-4\",\n      auto: \"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5\",\n    },\n    gap: {\n      sm: \"gap-2\",\n      default: \"gap-4\",\n      lg: \"gap-6\",\n    },\n  },\n  defaultVariants: {\n    columns: \"auto\",\n    gap: \"default\",\n  },\n});\n\n// Badge size mapping\nconst badgeSizeMap = {\n  sm: \"w-20\",\n  default: \"w-28\",\n  lg: \"w-36\",\n} as const;\n\n// Props\ninterface AchievementGridProps\n  extends\n    React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof achievementGridVariants> {\n  /** Array of achievements */\n  achievements: UserAchievement[];\n  /** Filter achievements */\n  filter?: \"all\" | \"earned\" | \"locked\";\n  /** Sort achievements */\n  sortBy?: \"name\" | \"earned\" | \"trigger\";\n  /** Size of achievement badges */\n  badgeSize?: \"sm\" | \"default\" | \"lg\";\n  /** Variant for badges */\n  badgeVariant?: \"card\" | \"badge\" | \"minimal\";\n  /** Style for locked achievements */\n  lockedStyle?: \"grayscale\" | \"silhouette\" | \"hidden\";\n  /** Custom empty state */\n  emptyState?: React.ReactNode;\n  /** Callback when achievement clicked */\n  onAchievementClick?: (achievement: UserAchievement) => void;\n}\n\nconst AchievementGrid = React.forwardRef<HTMLDivElement, AchievementGridProps>(\n  (\n    {\n      className,\n      columns,\n      gap,\n      achievements,\n      filter = \"all\",\n      sortBy = \"name\",\n      badgeSize = \"default\",\n      badgeVariant = \"card\",\n      lockedStyle = \"grayscale\",\n      emptyState,\n      onAchievementClick,\n      ...props\n    },\n    ref,\n  ) => {\n    // Filter achievements\n    const filtered = React.useMemo(() => {\n      switch (filter) {\n        case \"earned\":\n          return achievements.filter((a) => a.achievedAt !== null);\n        case \"locked\":\n          return achievements.filter((a) => a.achievedAt === null);\n        default:\n          return achievements;\n      }\n    }, [achievements, filter]);\n\n    // Sort achievements\n    const sorted = React.useMemo(() => {\n      const copy = [...filtered];\n      switch (sortBy) {\n        case \"earned\":\n          return copy.sort((a, b) => {\n            if (a.achievedAt && b.achievedAt) {\n              return (\n                new Date(b.achievedAt).getTime() -\n                new Date(a.achievedAt).getTime()\n              );\n            }\n            if (a.achievedAt) return -1;\n            if (b.achievedAt) return 1;\n            return 0;\n          });\n        case \"trigger\":\n          return copy.sort((a, b) => a.trigger.localeCompare(b.trigger));\n        case \"name\":\n        default:\n          return copy.sort((a, b) => a.name.localeCompare(b.name));\n      }\n    }, [filtered, sortBy]);\n\n    // Empty state\n    if (sorted.length === 0) {\n      if (emptyState) {\n        return <>{emptyState}</>;\n      }\n      return (\n        <div className=\"flex flex-col items-center justify-center py-12 text-center text-muted-foreground\">\n          <Trophy className=\"h-12 w-12 mb-4 opacity-50\" />\n          <p className=\"text-sm\">\n            {filter === \"earned\"\n              ? \"No achievements earned yet\"\n              : filter === \"locked\"\n                ? \"All achievements unlocked!\"\n                : \"No achievements available\"}\n          </p>\n        </div>\n      );\n    }\n\n    const imageSize = {\n      sm: \"h-12 w-12\",\n      default: \"h-16 w-16\",\n      lg: \"h-20 w-20\",\n    }[badgeSize];\n\n    const iconSize = {\n      sm: \"h-8 w-8\",\n      default: \"h-10 w-10\",\n      lg: \"h-12 w-12\",\n    }[badgeSize];\n\n    return (\n      <div\n        ref={ref}\n        className={cn(achievementGridVariants({ columns, gap }), className)}\n        {...props}\n      >\n        {sorted.map((achievement) => {\n          const isUnlocked = achievement.achievedAt !== null;\n\n          // Skip if hidden and locked\n          if (!isUnlocked && lockedStyle === \"hidden\") {\n            return null;\n          }\n\n          return (\n            <div\n              key={achievement.id}\n              role={onAchievementClick ? \"button\" : undefined}\n              tabIndex={onAchievementClick ? 0 : undefined}\n              onClick={() => onAchievementClick?.(achievement)}\n              onKeyDown={\n                onAchievementClick\n                  ? (e) => {\n                      if (e.key === \"Enter\" || e.key === \" \") {\n                        e.preventDefault();\n                        onAchievementClick(achievement);\n                      }\n                    }\n                  : undefined\n              }\n              className={cn(\n                \"flex flex-col items-center gap-2 rounded-lg p-4 transition-all\",\n                badgeVariant === \"card\" &&\n                  \"border bg-card shadow-sm hover:shadow-md\",\n                badgeVariant === \"badge\" && \"bg-transparent\",\n                badgeVariant === \"minimal\" && \"bg-transparent p-2\",\n                onAchievementClick && \"cursor-pointer\",\n                !isUnlocked && lockedStyle === \"grayscale\" && \"opacity-50\",\n              )}\n            >\n              {/* Badge image */}\n              {achievement.badgeUrl ? (\n                <img\n                  src={achievement.badgeUrl}\n                  alt={achievement.name}\n                  className={cn(\n                    imageSize,\n                    \"rounded-full object-cover\",\n                    !isUnlocked && lockedStyle === \"grayscale\" && \"grayscale\",\n                    !isUnlocked &&\n                      lockedStyle === \"silhouette\" &&\n                      \"brightness-0 opacity-30\",\n                  )}\n                />\n              ) : (\n                <div\n                  className={cn(\n                    imageSize,\n                    \"flex items-center justify-center rounded-full\",\n                    isUnlocked\n                      ? \"bg-purple-500 text-white\"\n                      : \"bg-muted text-muted-foreground\",\n                  )}\n                >\n                  <Trophy className={iconSize} />\n                </div>\n              )}\n\n              {/* Name */}\n              <span\n                className={cn(\n                  \"text-sm text-center font-medium leading-tight\",\n                  !isUnlocked && \"text-muted-foreground\",\n                )}\n              >\n                {achievement.name}\n              </span>\n            </div>\n          );\n        })}\n      </div>\n    );\n  },\n);\nAchievementGrid.displayName = \"AchievementGrid\";\n\nexport { AchievementGrid, achievementGridVariants };\nexport type { AchievementGridProps, Achievement, UserAchievement };\n",
      "type": "registry:ui"
    }
  ]
}